(this["webpackJsonpmovies-rdb"]=this["webpackJsonpmovies-rdb"]||[]).push([[0],{16:function(e,t,n){e.exports=n.p+"static/media/no-image.d9756f52.png"},29:function(e,t,n){e.exports=n(45)},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),i=n.n(o),c=n(14),s=n(28),l=(n(38),n(21)),u=n(4),m=n(5),v=n(9),h=n(8),p=n(10),d=(n(39),function(e){var t=e.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"error-indicator"},"Ops... Something went wrong",t&&r.a.createElement("p",null,"Try Re-Sign-In")))}),g=(n(40),n(41),new(function(){function e(){return Object(u.a)(this,e),e.instance?e.instance:(e.instance=this,this)}return Object(m.a)(e,[{key:"getItem",value:function(e){return JSON.parse(localStorage.getItem("".concat(e)))}},{key:"setItem",value:function(e,t){return localStorage.setItem("".concat(e),JSON.stringify(t))}}]),e}()),n(15)),f=n.n(g),y=n(16),b=n.n(y),E="fa2b02021794026b428e1d15dc359d00",k="https://api.themoviedb.org/3/",O=new(function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"generateUrl",value:function(e,t,n){return n?"".concat(k).concat(e,"?query=").concat(n,"&api_key=").concat(E):t?"".concat(k).concat(e,"?api_key=").concat(E,"&page=").concat(t):"".concat(k).concat(e,"?&api_key=").concat(E)}},{key:"throwCommonError",value:function(e){if(e.errors&&e.errors.length)throw new Error(e.errors.join(" | "));throw new Error("".concat(e.status_message," (error code: ").concat(e.status_code,")"))}},{key:"handleApiCall",value:function(e){var t,n;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(fetch(e));case 2:return t=a.sent,a.next=5,f.a.awrap(t.json());case 5:return n=a.sent,t.ok||this.throwCommonError(n),a.abrupt("return",n);case 8:case"end":return a.stop()}}),null,this)}},{key:"getPopularMovies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.generateUrl("movie/popular",e);return this.handleApiCall(t)}},{key:"getTopRatedMovies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.generateUrl("movie/top_rated",e);return this.handleApiCall(t)}},{key:"getMovie",value:function(e){var t=this.generateUrl("movie/".concat(e));return this.handleApiCall(t)}},{key:"getMovieRecommendations",value:function(e){var t=this.generateUrl("movie/".concat(e,"/recommendations"));return this.handleApiCall(t)}},{key:"getGenresListForMovies",value:function(){var e=this.generateUrl("genre/movie/list");return this.handleApiCall(e)}},{key:"getMoviePosterImageUrl",value:function(e){return e.poster_path?"".concat("https://image.tmdb.org/t/p/original/").concat(e.poster_path):b.a}},{key:"getMoviePosterMiniImageUrl",value:function(e){return e.poster_path?"".concat("https://image.tmdb.org/t/p/w500/").concat(e.poster_path):b.a}},{key:"getMovieBackdropImageUrl",value:function(e){return e.backdrop_path?"".concat("https://image.tmdb.org/t/p/original/").concat(e.backdrop_path):b.a}},{key:"getMovieReleaseYear",value:function(e){return e.release_date?new Date(e.release_date).getFullYear():"N/A"}},{key:"searchMovies",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.generateUrl("search/movie",t,e);return this.handleApiCall(n)}}]),e}()),j=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(h.a)(t).call(this))).mountStyle=function(){e.setState({style:{transform:"scale(1, 1)",transitionDelay:"0s, ".concat(e.props.delay,"s"),transitionProperty:"opacity, transform",transitionDuration:"0.3s",transitionTimingFunction:"ease",opacity:"1"}})},e.state={style:{transform:"scale(0, 0)",transitionDelay:"0s, 0s",transitionProperty:"opacity, transform",transitionDuration:"0.3s",transitionTimingFunction:"ease",opacity:"0"}},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){setTimeout(this.mountStyle,10)}},{key:"render",value:function(){return r.a.createElement("div",{className:"movie-item",style:this.state.style},r.a.createElement("img",{src:O.getMoviePosterMiniImageUrl(this.props.movie),alt:""}))}}]),t}(r.a.Component),w=function(e){var t=e.movies,n=e.loading,a=e.error;return n?r.a.createElement("div",null,"Loading..."):a?r.a.createElement("div",{className:"list"},r.a.createElement(d,null)):t?(console.log(t),r.a.createElement("div",{className:"list"},t.map((function(e){return r.a.createElement("div",{className:"item-wrapper",key:e.id},r.a.createElement(j,{movie:e,delay:t.indexOf(e)%20*.04}))})))):r.a.createElement("div",null,"Nothing")},M=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(h.a)(t).call(this))).handleScroll=function(){var t=document.documentElement.clientHeight;document.documentElement.getBoundingClientRect().bottom-t<80&&(e.setState((function(e){return{currentPage:e.currentPage+1}})),O.getPopularMovies(e.state.currentPage).then((function(t){return e.setState({movies:[].concat(Object(l.a)(e.state.movies),Object(l.a)(t.results))})})).catch((function(e){console.log(e)})))},e.state={movies:[],currentPage:1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.getPopularMovies().then((function(t){return e.setState({movies:t.results})})).catch((function(e){console.log(e)})),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{movies:this.state.movies}))}}]),t}(r.a.Component),S=Object(c.b)((function(e){return{movies:e.movies.movies,loading:e.movies.loading,error:e.movies.error}}),{})(M),C=function(){return r.a.createElement(S,null)},_=(n(43),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(h.a)(t).call(this))).state={hasError:!1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(d,null):this.props.children}}]),t}(r.a.Component)),P=n(7),U=n(25),I=n(26),D={movies:[]},N=Object(P.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;t.type;return e}}),A=[I.a],x=Object(P.createStore)(N,Object(U.composeWithDevTools)(P.applyMiddleware.apply(void 0,A)));i.a.render(r.a.createElement(c.a,{store:x},r.a.createElement(_,null,r.a.createElement(s.a,null,r.a.createElement((function(){return r.a.createElement(C,null)}),null)))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.2d9861b8.chunk.js.map