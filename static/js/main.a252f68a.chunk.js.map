{"version":3,"sources":["assets/no-image.png","components/ErrorIndicator/ErrorIndicator.js","services/StorageService.js","services/api.js","components/MovieItem/MovieItem.js","components/MovieList/MovieList.js","components/Movies/Movies.js","pages/Home.js","components/ErrorBoundry/ErrorBoundry.js","reducers/movies.js","reducers/index.js","store.js","index.js","components/App/App.js"],"names":["module","exports","ErrorIndicator","status","className","LocalStorage","instance","this","key","JSON","parse","localStorage","getItem","value","setItem","stringify","API_KEY","BASE_API_URL","path","page","query","data","errors","length","Error","join","status_message","status_code","url","fetch","response","json","ok","throwCommonError","generateUrl","handleApiCall","id","movie","poster_path","imageFallback","backdrop_path","release_date","Date","getFullYear","MovieItem","mountStyle","setState","style","transform","transitionDelay","props","delay","opacity","state","setTimeout","src","Api","getMoviePosterImageUrl","alt","React","Component","MovieList","movies","loading","error","console","log","map","indexOf","Movies","handleScroll","clientHeight","document","documentElement","getBoundingClientRect","bottom","currentPage","getPopularMovies","then","results","catch","err","window","addEventListener","removeEventListener","connect","Home","ErrorBoundry","hasError","children","initialState","reducer","combineReducers","action","type","middleware","thunk","store","createStore","composeWithDevTools","applyMiddleware","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.a252f68a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/no-image.d9756f52.png\";","import React from 'react';\nimport './errorIndicator.scss';\n\nexport const ErrorIndicator = ({ status }) => {\n  return (\n    <>\n    <div className=\"error-indicator\">\n      Ops... Something went wrong\n      {status &&  <p>Try Re-Sign-In</p>}\n    </div>\n    </>\n  )\n};\n","class LocalStorage {\n  constructor() {\n    if (LocalStorage.instance) {\n      return LocalStorage.instance\n    }\n    LocalStorage.instance = this;\n    return this;\n  }\n\n  getItem(key) {\n    return JSON.parse(localStorage.getItem(`${key}`));\n  }\n\n  setItem(key, value) {\n    return localStorage.setItem(`${key}`, JSON.stringify(value));\n  }\n}\n\nexport default new LocalStorage();\n","import imageFallback from '../assets/no-image.png';\n\nconst API_KEY = 'fa2b02021794026b428e1d15dc359d00';\nconst BASE_API_URL = 'https://api.themoviedb.org/3/';\nconst BASE_IMG_API = 'https://image.tmdb.org/t/p/original/';\n\nclass Api {\n  generateUrl(path, page, query) {\n    if (query) {\n      return `${BASE_API_URL}${path}?query=${query}&api_key=${API_KEY}`;\n    }\n    if (page) {\n      return `${BASE_API_URL}${path}?api_key=${API_KEY}&page=${page}`;\n    }\n\n    return `${BASE_API_URL}${path}?&api_key=${API_KEY}`;\n  }\n\n  throwCommonError(data) {\n    if (data.errors && data.errors.length) {\n      throw new Error(data.errors.join(' | '));\n    }\n\n    throw new Error(`${data.status_message} (error code: ${data.status_code})`);\n  }\n\n  async handleApiCall(url) {\n    const response = await fetch(url);\n    const data = await response.json();\n\n    if (!response.ok) {\n      this.throwCommonError(data);\n    }\n\n    return data;\n  }\n\n  getPopularMovies(page = 1) {\n    const url = this.generateUrl('movie/popular', page);\n\n    return this.handleApiCall(url);\n  }\n\n  getMovie(id) {\n    const url = this.generateUrl(`movie/${id}`);\n\n    return this.handleApiCall(url);\n  }\n\n  getMovieRecommendations(id) {\n    const url = this.generateUrl(`movie/${id}/recommendations`);\n\n    return this.handleApiCall(url);\n  }\n\n  getGenresListForMovies() {\n    const url = this.generateUrl('genre/movie/list');\n\n    return this.handleApiCall(url);\n  }\n\n  getMoviePosterImageUrl(movie) {\n    if (!movie.poster_path) {\n      return imageFallback;\n    }\n\n    return `${BASE_IMG_API}${movie.poster_path}`;\n  }\n\n  getMovieBackdropImageUrl(movie) {\n    if (!movie.backdrop_path) {\n      return imageFallback;\n    }\n\n    return `${BASE_IMG_API}${movie.backdrop_path}`;\n  }\n\n  getMovieReleaseYear(movie) {\n    if (!movie.release_date) {\n      return 'N/A';\n    }\n\n    return new Date(movie.release_date).getFullYear();\n  }\n\n  searchMovies(query, page = 1) {\n    const url = this.generateUrl('search/movie', page, query);\n\n    return this.handleApiCall(url);\n  }\n}\n\nexport default new Api();\n","import React from 'react';\nimport './movieItem.scss';\nimport {Api} from \"../../services\";\n\nexport class MovieItem extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      style: {\n        transform: 'scale(0, 0)',\n        transitionDelay: `0s, 0s`,\n        opacity: '0'\n      }\n    }\n  }\n\n  mountStyle = () => {\n    this.setState({\n      style : {\n        transform: 'scale(1, 1)',\n        transitionDelay: `0s, ${this.props.delay}s`,\n        opacity: '1'\n      }\n    })\n  };\n\n  componentDidMount() {\n    setTimeout(this.mountStyle, 300);\n  }\n\n  render() {\n    return (\n      <div className=\"movie-item\" style={this.state.style}>\n        <img src={Api.getMoviePosterImageUrl(this.props.movie)} alt=\"\"/>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { ErrorIndicator } from '../ErrorIndicator';\nimport './movieList.scss';\nimport { MovieItem } from \"../MovieItem\";\n\nexport const MovieList = ({ movies, loading, error }) => {\n  if (loading) {\n    return <div>Loading...</div>\n  }\n\n  if (error) {\n    return (\n      <div className=\"list\">\n        <ErrorIndicator/>\n      </div>\n    )\n  }\n\n\n  if (movies) {\n    console.log(movies);\n    return (\n      <div className=\"list\">\n        {\n          movies.map((movie) => {\n            return (\n              <div key={movie.id}>\n                <MovieItem\n                  movie={movie}\n                  delay={(movies.indexOf(movie)%20)*0.2}\n                />\n              </div>\n            )\n          })\n        }\n      </div>\n    )\n  } else {\n    return <div>Nothing</div>\n  }\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { MovieList } from '../MovieList';\nimport { Api } from '../../services';\n\nclass Movies extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      movies: [],\n      currentPage: 1\n    }\n  }\n\n  handleScroll = () => {\n    let clientHeight = document.documentElement.clientHeight;\n    let bottom = document.documentElement.getBoundingClientRect().bottom;\n    if (bottom - clientHeight < 150) {\n      this.setState((state) => {\n        return {currentPage: state.currentPage + 1}\n      });\n      Api.getPopularMovies(this.state.currentPage)\n        .then((data) => this.setState({movies: [...this.state.movies, ...data.results]}))\n        .catch((err) => {\n          console.log(err)\n        });\n    }\n  };\n\n  componentDidMount() {\n    Api.getPopularMovies()\n      .then((data) => this.setState({movies: data.results}))\n      .catch((err) => {\n        console.log(err)\n      });\n\n    window.addEventListener('scroll', this.handleScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  render() {\n    return (\n      <>\n        <MovieList movies={this.state.movies} />\n      </>\n    )\n  }\n}\n\nconst mapDispatchToProps = {\n\n};\n\nconst mapStateToProps = state => ({\n  movies: state.movies.movies,\n  loading: state.movies.loading,\n  error: state.movies.error\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Movies);\n","import React from 'react';\nimport { Movies } from '../components/Movies'\n\nexport const Home = () => {\n  return (\n    <Movies />\n  );\n};\n","import React from 'react';\nimport { ErrorIndicator } from '../ErrorIndicator';\n\nexport class ErrorBoundry extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      hasError: false\n    }\n  }\n\n  componentDidCatch() {\n    this.setState({ hasError: true })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />\n    }\n\n    return this.props.children;\n  }\n}\n","const initialState = {\n    movies: []\n};\n\nexport const movies = (state = initialState, action) => {\n    const { type } = action;\n    switch (type) {\n        default:\n            return state;\n    }\n};\n","import { combineReducers } from 'redux';\nimport { movies } from './movies';\n\nexport const reducer = combineReducers({\n    movies\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { reducer } from './reducers';\n\nconst middleware = [thunk];\n\nexport const store = createStore(\n  reducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { HashRouter } from 'react-router-dom';\n\nimport './styles/normalize.css';\n\nimport { App } from './components/App';\nimport { ErrorBoundry } from './components/ErrorBoundry';\nimport { store } from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <HashRouter>\n        <App />\n      </HashRouter>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);\n","import React from 'react';\nimport { Home } from \"../../pages\";\nimport './app.scss';\n\nexport const App = () => {\n  return (\n    <Home />\n  );\n};\n"],"sourceRoot":""}