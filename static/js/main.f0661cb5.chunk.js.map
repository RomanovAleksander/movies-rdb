{"version":3,"sources":["assets/no-image.png","components/Slider/Slider.js","services/StorageService.js","services/api.js","pages/Home.js","components/ErrorIndicator/ErrorIndicator.js","components/ErrorBoundry/ErrorBoundry.js","reducers/movies.js","reducers/index.js","store.js","index.js","components/App/App.js"],"names":["module","exports","timer","LocalStorage","instance","this","key","JSON","parse","localStorage","getItem","value","setItem","stringify","API_KEY","BASE_API_URL","path","page","query","data","errors","length","Error","join","status_message","status_code","url","fetch","response","json","ok","throwCommonError","generateUrl","handleApiCall","id","movie","poster_path","imageFallback","backdrop_path","release_date","Date","getFullYear","Slider","props","state","movies","sliderMovies","img","err","activeIndex","left","sliderWidth","Api","getPopularMovies","then","setState","results","slice","getMovieBackdropImageUrl","console","log","catch","onElementWidthChange","autoSlider","ResizeObserver","entries","width","contentRect","observe","document","querySelector","e","parseInt","target","textContent","clearInterval","setInterval","nextSlide","className","style","map","item","backgroundImage","title","vote_average","index","onClick","clickIndicator","React","Component","Home","ErrorIndicator","status","ErrorBoundry","hasError","children","initialState","reducer","combineReducers","action","type","middleware","thunk","store","createStore","composeWithDevTools","applyMiddleware","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f0661cb5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/no-image.d9756f52.png\";","import React from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { Api } from \"../../services\";\nimport './slider.scss';\n\nlet timer;\nexport class Slider extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      movies: [],\n      sliderMovies: [],\n      movie: {},\n      img: '',\n      err: {},\n      activeIndex: 1,\n      left: 0,\n      sliderWidth: 0\n    };\n  }\n\n  componentDidMount() {\n    Api.getPopularMovies(1)\n      .then((data) => {\n        this.setState({\n          movies: data,\n          sliderMovies: data.results.slice(0, 5),\n          movie: data.results[5],\n          img: Api.getMovieBackdropImageUrl(data.results[5])\n        });\n        console.log(data)\n      })\n      .catch((err) => {\n        this.setState({\n          err: err\n        });\n      });\n    // Api.searchMovies('joker', 1)\n    //   .then((data) => {\n    //     console.log(data)\n    //   })\n    this.onElementWidthChange();\n    this.autoSlider();\n  }\n\n  onElementWidthChange() {\n    const ro = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        const {width} = entry.contentRect;\n        this.setState({\n          sliderWidth: width\n        });\n      }\n    });\n\n    ro.observe(document.querySelector('.slider'));\n  }\n\n  nextSlide() {\n    this.setState({\n      activeIndex: this.state.activeIndex + 1,\n      left: this.state.left - this.state.sliderWidth\n    });\n    if (this.state.activeIndex === this.state.sliderMovies.length + 1) {\n      this.setState({\n        activeIndex: this.state.activeIndex - this.state.sliderMovies.length,\n        left: 0\n      });\n    }\n    this.autoSlider();\n  }\n\n  clickIndicator(e) {\n    this.setState({\n      activeIndex: parseInt(e.target.textContent),\n      left: this.state.sliderWidth - parseInt(e.target.textContent) * this.state.sliderWidth\n    });\n    clearInterval(timer);\n    this.autoSlider();\n  }\n\n  autoSlider() {\n    clearInterval(timer);\n    timer = setInterval(() => {\n      this.nextSlide();\n    }, 5000);\n\n  }\n\n  render() {\n    console.log(this.state);\n\n    // const genres = (genres) => {\n    //   console.log(genres);\n    //   let nestedArray = [];\n    //   let result;\n    //\n    //   if(genres !== undefined){\n    //     genres.forEach((item) => {\n    //       nestedArray.push(item.name);\n    //     });\n    //   }\n    //   result = nestedArray.join('/');\n    //   return result;\n    // };\n\n    return (\n      <>\n      <div className=\"slider\">\n        <div className=\"slider-inner\" style={\n          {\n            left: this.state.left\n          }\n        }>\n        {this.state.sliderMovies.map((item) => {\n          return (\n            <div className=\"slider-item\" style={\n              {\n                backgroundImage: `url(${Api.getMovieBackdropImageUrl(item)}`\n              }\n            }\n                 key={item.id}>\n              <div className=\"slider-item__title\">{item.title}</div>\n              <div className=\"slider-item__details\">\n                <span>{item.release_date}</span>\n                <span>{item.vote_average}</span>\n              </div>\n              <div className=\"slider-item__footer\">\n                <button>Watch Trailer</button>\n                <button>View Details</button>\n              </div>\n            </div>\n          )\n        })}\n        </div>\n      </div>\n        <div className=\"slider-dots\">\n          {this.state.sliderMovies.map((item, index) => {\n            return (\n              <div className={index + 1 === this.state.activeIndex ? 'active' : ''}\n                   onClick={() => {\n                     console.log(this.clickIndicator())\n                   }}\n                   key={index}>\n                {index + 1}\n              </div>\n            )\n          })}\n        </div>\n        </>\n    );\n  }\n}\n","class LocalStorage {\n  constructor() {\n    if (LocalStorage.instance) {\n      return LocalStorage.instance\n    }\n    LocalStorage.instance = this;\n    return this;\n  }\n\n  getItem(key) {\n    return JSON.parse(localStorage.getItem(`${key}`));\n  }\n\n  setItem(key, value) {\n    return localStorage.setItem(`${key}`, JSON.stringify(value));\n  }\n}\n\nexport default new LocalStorage();\n","import imageFallback from '../assets/no-image.png';\n\nconst API_KEY = 'fa2b02021794026b428e1d15dc359d00';\nconst BASE_API_URL = 'https://api.themoviedb.org/3/';\nconst BASE_IMG_API = 'https://image.tmdb.org/t/p/original/';\n\nclass Api {\n  generateUrl(path, page, query) {\n    if (query) {\n      return `${BASE_API_URL}${path}?query=${query}&api_key=${API_KEY}`;\n    }\n    if (page) {\n      return `${BASE_API_URL}${path}?api_key=${API_KEY}&page=${page}`;\n    }\n\n    return `${BASE_API_URL}${path}?&api_key=${API_KEY}`;\n  }\n\n  throwCommonError(data) {\n    if (data.errors && data.errors.length) {\n      throw new Error(data.errors.join(' | '));\n    }\n\n    throw new Error(`${data.status_message} (error code: ${data.status_code})`);\n  }\n\n  async handleApiCall(url) {\n    const response = await fetch(url);\n    const data = await response.json();\n\n    if (!response.ok) {\n      this.throwCommonError(data);\n    }\n\n    return data;\n  }\n\n  getPopularMovies(page = 1) {\n    const url = this.generateUrl('movie/popular', page);\n\n    return this.handleApiCall(url);\n  }\n\n  getMovie(id) {\n    const url = this.generateUrl(`movie/${id}`);\n\n    return this.handleApiCall(url);\n  }\n\n  getMovieRecommendations(id) {\n    const url = this.generateUrl(`movie/${id}/recommendations`);\n\n    return this.handleApiCall(url);\n  }\n\n  getGenresListForMovies() {\n    const url = this.generateUrl('genre/movie/list');\n\n    return this.handleApiCall(url);\n  }\n\n  getMoviePosterImageUrl(movie) {\n    if (!movie.poster_path) {\n      return imageFallback;\n    }\n\n    return `${BASE_IMG_API}${movie.poster_path}`;\n  }\n\n  getMovieBackdropImageUrl(movie) {\n    if (!movie.backdrop_path) {\n      return imageFallback;\n    }\n\n    return `${BASE_IMG_API}${movie.backdrop_path}`;\n  }\n\n  getMovieReleaseYear(movie) {\n    if (!movie.release_date) {\n      return 'N/A';\n    }\n\n    return new Date(movie.release_date).getFullYear();\n  }\n\n  searchMovies(query, page = 1) {\n    const url = this.generateUrl('search/movie', page, query);\n\n    return this.handleApiCall(url);\n  }\n}\n\nexport default new Api();\n","import React from 'react';\nimport { Slider } from '../components/Slider'\n\nexport const Home = () => {\n  return (\n    <Slider />\n  );\n};\n","import React from 'react';\nimport './errorIndicator.scss';\n\nexport const ErrorIndicator = ({ status }) => {\n  return (\n    <>\n    <div className=\"error-indicator\">\n      Ops... Something went wrong\n      {status &&  <p>Try Re-Sign-In</p>}\n    </div>\n    </>\n  )\n};\n","import React from 'react';\nimport { ErrorIndicator } from '../ErrorIndicator';\n\nexport class ErrorBoundry extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      hasError: false\n    }\n  }\n\n  componentDidCatch() {\n    this.setState({ hasError: true })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />\n    }\n\n    return this.props.children;\n  }\n}\n","const initialState = {\n    movies: []\n};\n\nexport const movies = (state = initialState, action) => {\n    const { type } = action;\n    switch (type) {\n        default:\n            return state;\n    }\n};\n","import { combineReducers } from 'redux';\nimport { movies } from './movies';\n\nexport const reducer = combineReducers({\n    movies\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { reducer } from './reducers';\n\nconst middleware = [thunk];\n\nexport const store = createStore(\n  reducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { HashRouter } from 'react-router-dom';\n\nimport './styles/normalize.css';\n\nimport { App } from './components/App';\nimport { ErrorBoundry } from './components/ErrorBoundry';\nimport { store } from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <HashRouter>\n        <App />\n      </HashRouter>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);\n","import React from 'react';\nimport { Home } from \"../../pages\";\nimport './app.scss';\n\nexport const App = () => {\n  return (\n    <Home />\n  );\n};\n"],"sourceRoot":""}