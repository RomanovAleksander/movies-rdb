(this["webpackJsonpmovies-rdb"]=this["webpackJsonpmovies-rdb"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/no-image.d9756f52.png"},34:function(e,t,a){e.exports=a(54)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),i=a.n(o),c=a(16),s=a(17),l=(a(43),a(15)),u=a(2),m=a(3),v=a(5),d=a(4),p=a(6),f=(a(44),function(e){var t=e.status;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"error-indicator"},"Ops... Something went wrong",t&&r.a.createElement("p",null,"Try Re-Sign-In")))}),h=(a(45),a(46),new(function(){function e(){return Object(u.a)(this,e),e.instance?e.instance:(e.instance=this,this)}return Object(m.a)(e,[{key:"getItem",value:function(e){return JSON.parse(localStorage.getItem("".concat(e)))}},{key:"setItem",value:function(e,t){return localStorage.setItem("".concat(e),JSON.stringify(t))}}]),e}())),g=a(21),E=a.n(g),y=a(22),_=a.n(y),b="fa2b02021794026b428e1d15dc359d00",O="https://api.themoviedb.org/3/",M=new(function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"generateUrl",value:function(e,t,a){return a?"".concat(O).concat(e,"?query=").concat(a,"&api_key=").concat(b):t?"".concat(O).concat(e,"?api_key=").concat(b,"&page=").concat(t):"".concat(O).concat(e,"?&api_key=").concat(b)}},{key:"throwCommonError",value:function(e){if(e.errors&&e.errors.length)throw new Error(e.errors.join(" | "));throw new Error("".concat(e.status_message," (error code: ").concat(e.status_code,")"))}},{key:"handleApiCall",value:function(e){var t,a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(fetch(e));case 2:return t=n.sent,n.next=5,E.a.awrap(t.json());case 5:return a=n.sent,t.ok||this.throwCommonError(a),n.abrupt("return",a);case 8:case"end":return n.stop()}}),null,this)}},{key:"getMovies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=this.generateUrl("".concat(a,"/").concat(t),e);return this.handleApiCall(n)}},{key:"getMovie",value:function(e,t){var a=this.generateUrl("".concat(t,"/").concat(e));return this.handleApiCall(a)}},{key:"getMoviesTrailer",value:function(e,t){var a=this.generateUrl("".concat(t,"/").concat(e,"/videos"));return this.handleApiCall(a)}},{key:"getMovieRecommendations",value:function(e){var t=this.generateUrl("movie/".concat(e,"/recommendations"));return this.handleApiCall(t)}},{key:"getGenresListForMovies",value:function(e){var t=this.generateUrl("genre/".concat(e,"/list"));return this.handleApiCall(t)}},{key:"getMoviePosterImageUrl",value:function(e){return e.poster_path?"".concat("https://image.tmdb.org/t/p/w780/").concat(e.poster_path):_.a}},{key:"getMoviePosterMiniImageUrl",value:function(e){return e.poster_path?"".concat("https://image.tmdb.org/t/p/w500/").concat(e.poster_path):_.a}},{key:"getMovieBackdropImageUrl",value:function(e){return e.backdrop_path?"".concat("https://image.tmdb.org/t/p/w780/").concat(e.backdrop_path):_.a}},{key:"getMovieReleaseYear",value:function(e){return e.release_date?new Date(e.release_date).getFullYear():"N/A"}},{key:"searchMovies",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.generateUrl("search/movie",t,e);return this.handleApiCall(a)}}]),e}()),S=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(d.a)(t).call(this))).mountStyle=function(){e.setState({style:{transform:"scale(1, 1)",transitionDelay:"0s, ".concat(e.props.delay,"s"),transitionProperty:"opacity, transform",transitionDuration:"0.3s",transitionTimingFunction:"ease",opacity:"1"}})},e.toggleHover=function(){e.setState({hover:!e.state.hover})},e.state={style:{transform:"scale(0, 0)",transitionDelay:"0s, 0s",transitionProperty:"opacity, transform",transitionDuration:"0.3s",transitionTimingFunction:"ease",opacity:"0"},hover:!1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){setTimeout(this.mountStyle,10)}},{key:"render",value:function(){var e=this.props.movie,t=e.title,a=e.vote_average,n=e.release_date,o=e.name,i=e.first_air_date,c=this.state.hover?{opacity:"1"}:{opacity:"0"},s=function(e){return e?"(".concat(e.substr(0,4),")"):""},l=t||o,u=s(n||i);return r.a.createElement("div",{className:"movie-item",style:this.state.style,onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover,onClick:this.props.onView},r.a.createElement("img",{src:M.getMoviePosterMiniImageUrl(this.props.movie),alt:""}),r.a.createElement("div",{className:"movie-item__details glow",style:c},r.a.createElement("div",{className:"details__title-year"},r.a.createElement("div",{className:"details-title"},l),r.a.createElement("div",{className:"details__year"},u)),r.a.createElement("div",{className:"details__vote"},r.a.createElement("span",{className:"icon"}," "),a)))}}]),t}(r.a.Component),j=function(e){var t=e.movies,a=e.isMovie,n=e.loading,o=e.error,i=e.onView;return n?r.a.createElement("div",null,"Loading..."):o?r.a.createElement("div",{className:"list"},r.a.createElement(f,null)):t?r.a.createElement("div",{className:"list"},t.map((function(e){return r.a.createElement("div",{className:"item-wrapper",key:e.id},r.a.createElement(S,{isMovie:a,movie:e,delay:t.indexOf(e)%20*.04,onView:function(){return i(e.id)}}))}))):r.a.createElement("div",null,"Nothing")},k=(a(48),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=a.props.changeFilterValue,n=e.target.dataset.filter;console.log(n),n!==a.props.filter&&(a.setState({filter:n}),t(n))},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=function(t){return e.props.filter===t?"active":""};return r.a.createElement("div",{className:"movies-filter"},r.a.createElement("ul",{onClick:this.handleClick},r.a.createElement("li",{className:t("popular"),"data-filter":"popular"},"Popular"),r.a.createElement("li",{className:t("top_rated"),"data-filter":"top_rated"},"Top rated"),"tv"===this.props.isTv?r.a.createElement("li",{className:t("on_the_air"),"data-filter":"on_the_air"},"On The Air"):r.a.createElement("li",{className:t("upcoming"),"data-filter":"upcoming"},"Upcoming")))}}]),t}(r.a.Component)),C=(a(49),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(d.a)(t).call(this))).handleClick=function(t){var a=e.props.changeCategoryValue,n=t.target.dataset.category;console.log("target: ",n),n!==e.state.category&&(e.setState({category:n}),a(n))},e.state={category:"movie"},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=function(t){return e.state.category===t?"active":""};return r.a.createElement("nav",{className:"nav",onClick:this.handleClick},r.a.createElement("div",{className:"nav__btn ".concat(t("movie")),"data-category":"movie"},"Movies"),r.a.createElement("div",{className:"nav__btn ".concat(t("tv")),"data-category":"tv"},"TV"))}}]),t}(r.a.Component)),w=(a(50),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(d.a)(t).call(this))).trackScroll=function(){var t=window.pageYOffset,a=document.documentElement.clientHeight;t>a&&e.setState({isScrolled:!0}),t<a&&e.setState({isScrolled:!1})},e.backToTop=function(){window.pageYOffset>0&&(window.scrollBy(0,-100),setTimeout(e.backToTop,0))},e.state={isScrolled:!1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.trackScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.trackScroll)}},{key:"render",value:function(){var e=this.state.isScrolled?"show":"";return r.a.createElement("div",{className:"back-top ".concat(e),title:"Go to top",onClick:this.backToTop},r.a.createElement("i",{className:"fa fa-arrow-circle-up","aria-hidden":"true"}," "))}}]),t}(r.a.Component)),T=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(d.a)(t).call(this))).requestMovies=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.currentMoviesPage,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.props.filter,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.category,r=e.props,o=r.moviesLoaded,i=r.moviesRequested,c=r.moviesError;i(),console.log(e.state.currentMoviesPage),M.getMovies(t,a,n).then((function(e){return o(e.results)})).catch((function(e){c(e)}))},e.requestSomePages=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;e.requestMovies(t,a,n),setTimeout((function(){e.requestMovies(t+1,a,n)}),700)},e.changeFilter=function(t){e.props.filterMovies(t),e.setState({currentMoviesPage:2}),e.requestSomePages(1,t)},e.changeCategories=function(t){e.props.changeCategory(t),"movie"===e.props.category&&"upcoming"===e.props.filter&&"tv"===t?e.requestSomePages(1,"on_the_air",t):"tv"===e.props.category&&"on_the_air"===e.props.filter&&"movie"===t?e.requestSomePages(1,"upcoming",t):e.requestSomePages(1,e.props.filter,t)},e.handleScroll=function(){var t=document.documentElement.clientHeight;document.documentElement.getBoundingClientRect().bottom-t<50&&(e.setState((function(e){return{currentMoviesPage:e.currentMoviesPage+1}})),e.requestMovies())},e.state={currentMoviesPage:2,searchText:""},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.requestSomePages(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement(C,{changeCategoryValue:this.changeCategories}),r.a.createElement(k,{changeFilterValue:this.changeFilter,isTv:this.props.category,filter:this.props.filter})),r.a.createElement(j,{movies:this.props.movies,onView:function(t){e.props.history.push("/".concat(t))}}),r.a.createElement(w,null))}}]),t}(r.a.Component),N={moviesLoaded:function(e){return{type:"FETCH_MOVIES_SUCCESS",payload:e}},moviesRequested:function(){return{type:"FETCH_MOVIES_REQUEST"}},moviesError:function(e){return{type:"FETCH_MOVIES_FAILURE",payload:e}},filterMovies:function(e){return{type:"FILTER_MOVIES",payload:e}},changeCategory:function(e){return{type:"CHANGE_CATEGORY",payload:e}}},I=Object(c.b)((function(e){return{movies:e.movies.movies,filter:e.movies.filter,category:e.movies.category,loading:e.movies.loading,error:e.movies.error}}),N)(Object(l.f)(T)),F=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null))},U=(a(52),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(v.a)(this,Object(d.a)(t).call(this,e))).openModal=function(){a.setState({isOpen:!0})},a.state={trailerKey:null,isOpen:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.movieId,n=t.movieLoaded,r=t.movieRequested,o=t.movieError,i=t.category;document.body.style.overflow="hidden",r(),M.getMovie(a,i).then((function(e){n(e),console.log(e)})).catch((function(e){o(e)})),M.getMoviesTrailer(a,i).then((function(t){return e.setState({trailerKey:t.results[0].key})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props.movie;if(t){var a=t.title,n=t.genres,o=t.runtime,i=t.release_date,c=t.first_air_date,s=t.vote_average,l=t.overview,u=function(e){return e?"".concat(e.substr(0,4)):""},m=u(i||c);return r.a.createElement("div",{className:"details-wrapper"},this.state.isOpen?r.a.createElement("div",{className:"trailer-wrapper",onClick:function(){return e.setState({isOpen:!1})}},r.a.createElement("iframe",{className:"modal-trailer",title:"Trailer",src:"https://www.youtube-nocookie.com/embed/".concat(this.state.trailerKey),frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})):null,r.a.createElement("img",{src:M.getMoviePosterImageUrl(t),alt:"poser",className:"poster_img"}),r.a.createElement("div",{className:"details-content"},r.a.createElement("div",{className:"details-content__title"},a),r.a.createElement("div",{className:"details-content__info"},r.a.createElement("div",{className:"details-content__inf"},n?n[0].name:"-"),r.a.createElement("div",{className:"details-content__inf"},m),r.a.createElement("div",{className:"details-content__inf"},o),r.a.createElement("div",{className:"details-content__inf"},r.a.createElement("span",{className:"icon"}," "),s)),r.a.createElement("div",{className:"details-content__synopsis"},l),r.a.createElement("button",{onClick:this.openModal,className:"trailer_btn"},"Trailer")),r.a.createElement("div",{className:"close_btn",onClick:function(){e.props.history.push("/"),document.body.style.overflow="auto"}},"X"))}return r.a.createElement("div",null,"Ooopppss")}}]),t}(r.a.Component)),V={movieLoaded:function(e){return{type:"FETCH_MOVIE_SUCCESS",payload:e}},movieRequested:function(){return{type:"FETCH_MOVIE_REQUEST"}},movieError:function(e){return{type:"FETCH_MOVIE_FAILURE",payload:e}}},R=Object(c.b)((function(e){return{loading:e.movies.loading,error:e.movies.error,movie:e.movies.movie,category:e.movies.category}}),V)(Object(l.f)(U)),A=(a(53),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(v.a)(this,Object(d.a)(t).call(this))).state={hasError:!1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(f,null):this.props.children}}]),t}(r.a.Component)),H=a(14),P=a(32),L=a(33),q=a(23),D=a(11),x={movies:[],favouritesMovies:[],movie:null,searchText:"",filter:"popular",category:"movie",loading:!1,error:null},J=Object(H.combineReducers)({movies:function(e,t){var a=t.type,n=t.payload;if(void 0===e)return localStorage.favouritesJokes?Object(D.a)({},x,{favouritesJokes:h.getItem("favouritesMovies")}):x;switch(a){case"FETCH_MOVIE_REQUEST":return Object(D.a)({},e,{movie:{},loading:!0,error:null});case"FETCH_MOVIE_SUCCESS":return Object(D.a)({},e,{movie:n,loading:!1,error:null});case"FETCH_MOVIE_FAILURE":return Object(D.a)({},e,{movie:{},loading:!1,error:n});case"FETCH_MOVIES_REQUEST":return Object(D.a)({},e,{loading:!0,error:null});case"FETCH_MOVIES_SUCCESS":return Object(D.a)({},e,{movies:[].concat(Object(q.a)(e.movies),Object(q.a)(n)),loading:!1,error:null});case"FETCH_MOVIES_FAILURE":return Object(D.a)({},e,{movies:[],loading:!1,error:n});case"ADD_JOKE":var r=[].concat(Object(q.a)(e.favouritesMovies),[n]);return h.setItem("favouritesMovies",r),Object(D.a)({},e,{favouritesMovies:r});case"REMOVE_JOKE":var o=e.favouritesMovies.filter((function(e){return e.id!==n}));return h.setItem("favouritesMovies",o),Object(D.a)({},e,{favouritesMovies:o});case"FILTER_MOVIES":return Object(D.a)({},e,{movies:[],filter:n});case"CHANGE_CATEGORY":return Object(D.a)({},e,{movies:[],category:n,filter:function(t){return"movie"===e.category&&"upcoming"===e.filter&&"tv"===t?"on_the_air":"tv"===e.category&&"on_the_air"===e.filter&&"movie"===t?"upcoming":e.filter}(n)});default:return e}}}),G=[L.a],Y=Object(H.createStore)(J,Object(P.composeWithDevTools)(H.applyMiddleware.apply(void 0,G)));i.a.render(r.a.createElement(c.a,{store:Y},r.a.createElement(A,null,r.a.createElement(s.a,null,r.a.createElement((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/:id",component:function(e){var t=e.match.params.id;return r.a.createElement(R,{movieId:t})}})))}),null)))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.709f6f4f.chunk.js.map